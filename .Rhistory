data(mlc_churn) # Loads in the data used for this practic
samp_perc <- 0.6 # Defines the percent of the sample used for training
tr <- sample(nrow(mlc_churn),
round(nrow(mlc_churn)*samp_perc))
churnTrain <- churn[tr, ] # Create the training set
churnTrain <- mlc_churn[tr, ] # Create the training set
churnTest <- mlc_churn[-tr, ] # Create the testing set
table(churnTrain$mlc_churn)/nrow(churnTrain)
table(churn$mlc_churn)/nrow(churnTrain)
table(churn$mlc_churn)/nrow(mlc_churn)
library("modeldata") # Contains the 'mlc_churn' data used for practice
library("C50")
data(mlc_churn) # Loads in the data used for this practic
samp_perc <- 0.6 # Defines the percent of the sample used for training
tr <- sample(nrow(mlc_churn),
round(nrow(mlc_churn)*samp_perc))
churnTrain <- mlc_churn[tr, ] # Create the training set
churnTest <- mlc_churn[-tr, ] # Create the testing set
table(churn$mlc_churn)/nrow(mlc_churn)
churn$mlc_churn
table(mlc_churn$churn)/nrow(mlc_churn)
table(churnTrain$churn)/nrow(churnTrain)
samp_perc <- 0.6 # Defines the percent of the sample used for training
tr <- sample(nrow(mlc_churn),
round(nrow(mlc_churn)*samp_perc))
churnTrain <- mlc_churn[tr, ] # Create the training set
churnTest <- mlc_churn[-tr, ] # Create the testing set
table(mlc_churn$churn)/nrow(mlc_churn) # Percent of churn in the original data
table(churnTrain$churn)/nrow(churnTrain) # percent of churn in the training data, should be close to 14.14% (percent of churn in full data set)
tr <- sample(nrow(mlc_churn),
round(nrow(mlc_churn)*samp_perc))
churnTrain <- mlc_churn[tr, ] # Create the training set
churnTest <- mlc_churn[-tr, ] # Create the testing set
table(churnTrain$churn)/nrow(churnTrain) # percent of churn in the training data, should be close to 14.14% (percent of churn in full data set)
tr <- sample(nrow(mlc_churn),
round(nrow(mlc_churn)*samp_perc))
churnTrain <- mlc_churn[tr, ] # Create the training set
churnTest <- mlc_churn[-tr, ] # Create the testing set
table(mlc_churn$churn)/nrow(mlc_churn) # Percent of churn in the original data
table(churnTrain$churn)/nrow(churnTrain) # percent of churn in the training data, should be close to 14.14% (percent of churn in full data set)
set.seed(42) # Set a specific seed to prevent randomness generating a new set of samples
samp_perc <- 0.6 # Defines the percent of the sample used for training
tr <- sample(nrow(mlc_churn),
round(nrow(mlc_churn)*samp_perc))
churnTrain <- mlc_churn[tr, ] # Create the training set
churnTest <- mlc_churn[-tr, ] # Create the testing set
table(mlc_churn$churn)/nrow(mlc_churn) # Percent of churn in the original data
table(churnTrain$churn)/nrow(churnTrain) # percent of churn in the training data, should be close to 14.14% (percent of churn in full data set)
set.seed(43) # Set a specific seed to prevent randomness generating a new set of samples
samp_perc <- 0.6 # Defines the percent of the sample used for training
tr <- sample(nrow(mlc_churn),
round(nrow(mlc_churn)*samp_perc))
churnTrain <- mlc_churn[tr, ] # Create the training set
churnTest <- mlc_churn[-tr, ] # Create the testing set
table(mlc_churn$churn)/nrow(mlc_churn) # Percent of churn in the original data
table(churnTrain$churn)/nrow(churnTrain) # percent of churn in the training data, should be close to 14.14% (percent of churn in full data set)
str(my_folds)
my_folds <- createFolds(churnTrain$churn, k = 5)
str(my_folds)
table(my_folds[1])/nrow(my_folds)
str(my_folds) # lists out the folds
my_folds <- createFolds(churnTrain$churn,
k = 5) # Defines the number of folds
str(my_folds) # lists out the folds
table(my_folds[1])/nrow(my_folds)
?sapply
?function
help
sapply(my_folds, function(i){
table(churnTrain$churn[i])/length(i)
})
?trainControl
?train
library("caret")
my_control <- trainControl(summaryFunction = twoClassSummary, # The output of the training will have two different options
classProb = TRUE, # recalculate class probabilities for each re-sample
savePredictions = TRUE, # All hold-out predictions for each re-sample should be saved
index = my_folds # Lists each element for each re-sampling iteration
)
?expand.grid
install.packages("glmnet")
install.packages("Matrix")
install.packages("Matrix")
install.packages
install.packages("Matrix")
install.packages("Matrix")
install.packages("Matrix")
install.packages("Matrix")
library("modeldata") # Contains the 'mlc_churn' data used for practice
library("C50") # Contains churn data
library("caret") # Using the 'train' function
library("glmnet") # Required to use the glmnet method
library("Matrix") # Required to use the glmnet method
data(mlc_churn) # Loads in the data used for this practic
set.seed(43) # Set a specific seed to prevent randomness generating a new set of samples
samp_perc <- 0.6 # Defines the percent of the sample used for training
tr <- sample(nrow(mlc_churn),
round(nrow(mlc_churn)*samp_perc))
churnTrain <- mlc_churn[tr, ] # Create the training set
churnTest <- mlc_churn[-tr, ] # Create the testing set
table(mlc_churn$churn)/nrow(mlc_churn) # Percent of churn in the original data
table(churnTrain$churn)/nrow(churnTrain) # percent of churn in the training data, should be close to 14.14% (percent of churn in full data set)
my_folds <- createFolds(churnTrain$churn,
k = 5) # Defines the number of folds
str(my_folds) # lists out the folds
sapply(my_folds, function(i){ # Verify that the folds have a similar proportion of the yes/no results
table(churnTrain$churn[i])/length(i)
})
my_control <- trainControl(summaryFunction = twoClassSummary, # The output of the training will have two different options
classProb = TRUE, # recalculate class probabilities for each re-sample
savePredictions = TRUE, # All hold-out predictions for each re-sample should be saved
index = my_folds # Lists each element for each re-sampling iteration
)
# Create the glm model
glm_model <- train(churn ~ ., # Determines the output
churnTrain, # All of the training data
metric = "ROC", # Use ROC to determine which classification threshold is best
method = "glmnet", # Use a generelized linear regression method for this model
tuneGrid = expand.grid( # Data frame with tuning values
alpha = 0:1,# One of the tuning parameters for glmnet, mixing percentage
lambda = 0:10/10), # The other tuning parameter for glmnet, regularization parameter
trControl = my_control # Sets training controls to pre-established parameters
)
print(glm_model)
plot(glm_model)
# Developing a random forest model
rf_model <- train(churn ~ .,
churnTrain,
metric = "ROC", # Same metric as before
method = "ranger", # Random forest method
tuneGrid = expand.grid(
mtry = c(2, 5, 10, 19), # Number of randomly selected predictors, max being 20
splitrule = c("gini", "extratrees"), # Defines the splitting rules as gini and extra trees
min.node.size = 1 # Sets minimum node size to 1
),
trControl = my_control # Sets the training controls as the pre-established parameters
)
print(rf_model)
plot(rf_model)
?train
# Developing a kNN model
knn_model <- train(churn ~ .,
churnTrain,
metric = "ROC", # same metric as before
method = "knn", # kNN method
tuneLength = 20, # Number of tuning parameters, 20 bc the data contains 20 columns
trControl = my_control)
print(knn_model)
plot(knn_model)
knitr::opts_chunk$set(echo = TRUE)
?mutate
?tidyverse
??tidyverse
?read.csv
?col_types
??col_types
RF_RO_chara.df <- read.csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv'
col_types = cols(.default = col_character()))
RF_RO_chara.df <- read.csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character()))
library(tidyverse)
RF_RO_chara.df <- read.csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character()))
RF_RO_chara.df <- read_csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character()))
?read_csv
View(RF_RO_chara.df)
?filter
RF_RO_chara.df <- read_csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character())) %>% # Read in the rainfall/runoff characteristics data set
# Rename columns to include units
rename("PHD [hr]" = "PHD",        # Previous dry hours
"d_rain [min]" = "d_rain", # Duration of the rain event
"h_rain [in]" = "h_rain",  # Depth of the rain event
)
View(RF_RO_chara.df)
?remove
RF_RO_chara.df <- read_csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character())) %>% # Read in the rainfall/runoff characteristics data set
# Rename columns to include units
rename("PHD [hr]" = "PHD",                  # Previous dry hours
"d_rain [min]" = "d_rain",           # Duration of the rain event
"h_rain [in]" = "h_rain",            # Depth of the rain event
"i_rain-max [mm/hr]" = "i_rain-max", # Rainfall maximum intensity
"IPRT [min]" = "IPRT",               # Initial pavement residence time
"V_runoff [L]" = "V_runoff",         # Volume of runoff
"C [-]" = "C",                       # Runoff coefficient
"Q_inf-max [L/s]" = "Qinf-max",      # Maximum influent flow rate
"Q_inf-avg [L/s]" = "Qinf-avg",      # Average influent flow rate
"Q_eff-max [L/s]" = "Qeff-max",      # Maximum effluent flow rate
"Q_eff-avg [L/s]" = "Qeff-avg",      # Average effluent flow rate
"n_inf [-]" = "n_inf",               # Number of influent samples
"n_eff [-]" = "n_eff")            # Number of effluent samples
RF_RO_chara.df <- read_csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character())) %>% # Read in the rainfall/runoff characteristics data set
# Rename columns to include units
rename("PHD [hr]" = "PHD",                  # Previous dry hours
"d_rain [min]" = "d_rain",           # Duration of the rain event
"h_rain [in]" = "h_rain",            # Depth of the rain event
"i_rain-max [mm/hr]" = "i_rain-max", # Rainfall maximum intensity
"IPRT [min]" = "IPRT",               # Initial pavement residence time
"V_runoff [L]" = "V_runoff",         # Volume of runoff
"C [-]" = "C",                       # Runoff coefficient
"Q_inf-max [L/s]" = "Qinf-max",      # Maximum influent flow rate
"Q_inf-avg [L/s]" = "Qinf-avg",      # Average influent flow rate
"Q_eff-max [L/s]" = "Qeff-max",      # Maximum effluent flow rate
"Q_eff-avg [L/s]" = "Qeff-avg",      # Average effluent flow rate
"n_inf [-]" = "n_inf",               # Number of influent samples
"n_eff [-]" = "n_eff") %>%            # Number of effluent samples
subset(id != 1)
RF_RO_chara.df <- read_csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character())) %>% # Read in the rainfall/runoff characteristics data set
# Rename columns to include units
rename("PHD [hr]" = "PHD",                  # Previous dry hours
"d_rain [min]" = "d_rain",           # Duration of the rain event
"h_rain [in]" = "h_rain",            # Depth of the rain event
"i_rain-max [mm/hr]" = "i_rain-max", # Rainfall maximum intensity
"IPRT [min]" = "IPRT",               # Initial pavement residence time
"V_runoff [L]" = "V_runoff",         # Volume of runoff
"C [-]" = "C",                       # Runoff coefficient
"Q_inf-max [L/s]" = "Qinf-max",      # Maximum influent flow rate
"Q_inf-avg [L/s]" = "Qinf-avg",      # Average influent flow rate
"Q_eff-max [L/s]" = "Qeff-max",      # Maximum effluent flow rate
"Q_eff-avg [L/s]" = "Qeff-avg",      # Average effluent flow rate
"n_inf [-]" = "n_inf",               # Number of influent samples
"n_eff [-]" = "n_eff") %>%            # Number of effluent samples
slice(-1)
RF_RO_chara.df <- read_csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character())) %>% # Read in the rainfall/runoff characteristics data set
# Rename columns to include units
rename("PHD [hr]" = "PHD",                  # Previous dry hours
"d_rain [min]" = "d_rain",           # Duration of the rain event
"h_rain [in]" = "h_rain",            # Depth of the rain event
"i_rain-max [mm/hr]" = "i_rain-max", # Rainfall maximum intensity
"IPRT [min]" = "IPRT",               # Initial pavement residence time
"V_runoff [L]" = "V_runoff",         # Volume of runoff
"C [-]" = "C",                       # Runoff coefficient
"Q_inf-max [L/s]" = "Qinf-max",      # Maximum influent flow rate
"Q_inf-avg [L/s]" = "Qinf-avg",      # Average influent flow rate
"Q_eff-max [L/s]" = "Qeff-max",      # Maximum effluent flow rate
"Q_eff-avg [L/s]" = "Qeff-avg",      # Average effluent flow rate
"n_inf [-]" = "n_inf",               # Number of influent samples
"n_eff [-]" = "n_eff") %>%            # Number of effluent samples
slice(-1) %>% # Remove the row containing units
subset(select = -"Event")
RF_RO_chara.df <- read_csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character())) %>% # Read in the rainfall/runoff characteristics data set
# Rename columns to include units
rename("PHD [hr]" = "PHD",                  # Previous dry hours
"d_rain [min]" = "d_rain",           # Duration of the rain event
"h_rain [in]" = "h_rain",            # Depth of the rain event
"i_rain-max [mm/hr]" = "i_rain-max", # Rainfall maximum intensity
"IPRT [min]" = "IPRT",               # Initial pavement residence time
"V_runoff [L]" = "V_runoff",         # Volume of runoff
"C [-]" = "C",                       # Runoff coefficient
"Q_inf-max [L/s]" = "Qinf-max",      # Maximum influent flow rate
"Q_inf-avg [L/s]" = "Qinf-avg",      # Average influent flow rate
"Q_eff-max [L/s]" = "Qeff-max",      # Maximum effluent flow rate
"Q_eff-avg [L/s]" = "Qeff-avg",      # Average effluent flow rate
"n_inf [-]" = "n_inf",               # Number of influent samples
"n_eff [-]" = "n_eff") %>%            # Number of effluent samples
slice(-1) %>% # Remove the row containing units
subset(select = -c("Event"))
RF_RO_chara.df <- read_csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character())) %>% # Read in the rainfall/runoff characteristics data set
# Rename columns to include units
rename("PHD [hr]" = "PHD",                  # Previous dry hours
"d_rain [min]" = "d_rain",           # Duration of the rain event
"h_rain [in]" = "h_rain",            # Depth of the rain event
"i_rain-max [mm/hr]" = "i_rain-max", # Rainfall maximum intensity
"IPRT [min]" = "IPRT",               # Initial pavement residence time
"V_runoff [L]" = "V_runoff",         # Volume of runoff
"C [-]" = "C",                       # Runoff coefficient
"Q_inf-max [L/s]" = "Qinf-max",      # Maximum influent flow rate
"Q_inf-avg [L/s]" = "Qinf-avg",      # Average influent flow rate
"Q_eff-max [L/s]" = "Qeff-max",      # Maximum effluent flow rate
"Q_eff-avg [L/s]" = "Qeff-avg",      # Average effluent flow rate
"n_inf [-]" = "n_inf",               # Number of influent samples
"n_eff [-]" = "n_eff") %>%            # Number of effluent samples
slice(-1) %>% # Remove the row containing units
select(-Event)
# Filter Loading Rate
filter_chara.df <- read_csv("Data/commaSeparatedValues/FilterLoadingRate.csv",
col_types = cols(.default = col_character())) #%>%
View(filter_chara.df)
# Rainfall/Runoff Characteristics
RF_RO_chara.df <- read_csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character())) %>%
# Rename columns to include units
rename("PHD [hr]" = "PHD",                  # Previous dry hours
"d_rain [min]" = "d_rain",           # Duration of the rain event
"h_rain [in]" = "h_rain",            # Depth of the rain event
"i_rain-max [mm/hr]" = "i_rain-max", # Rainfall maximum intensity
"IPRT [min]" = "IPRT",               # Initial pavement residence time
"V_runoff [L]" = "V_runoff",         # Volume of runoff
"C [-]" = "C",                       # Runoff coefficient
"Q_inf-max [L/s]" = "Qinf-max",      # Maximum influent flow rate
"Q_inf-avg [L/s]" = "Qinf-avg",      # Average influent flow rate
"Q_eff-max [L/s]" = "Qeff-max",      # Maximum effluent flow rate
"Q_eff-avg [L/s]" = "Qeff-avg",      # Average effluent flow rate
"n_inf [-]" = "n_inf",               # Number of influent samples
"n_eff [-]" = "n_eff") %>%            # Number of effluent samples
slice(-1) %>%  # Remove the row containing units
select(-Event) # Remove the event count column
View(RF_RO_chara.df)
# Read in RainMeanCharacteristics1.csv
rain_chara_1.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics1.csv",
col_types = cols(.default = col_caracter())) #%>% # Read in the file
# Read in RainMeanCharacteristics1.csv
rain_chara_1.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics1.csv",
col_types = cols(.default = col_character())) #%>% # Read in the file
View(rain_chara_1.df)
# Read in RainMeanCharacteristics2.csv
rain_chara_2.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics2.csv",
col_types = cols(.default = col_character())) #%>%
View(rain_chara_2.df)
View(rain_chara_1.df)
View(rain_chara_2.df)
# Read in RainMeanCharacteristics1.csv
rain_chara_1.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics1.csv",
col_types = cols(.default = col_character())) %>% # Read in the file
# Rename columns to include units
rename("Cl(-) [ug/L]" = "Cl(-)",           # Chloride concentration
"SO4(2-) [ug/L]" = "SO4 (2-)",      # Sulfate concentration
"PO4(3-) [ug/L]" = "PO4 (3-)",      # Phosphate concentration
"NH3-N [ug/L]" = "NH3-N",           # Ammonia concentration
"NO3(-)-N [ug/L]" = "NO3(-)-N",     # Nitrate concentration
"TDN [ug/L]" = "TDN",               # Total dissolved nitrogen
"COD [mg/L]" = "COD",               # Chemical oxygen demand
"Turbidity [NTU]" = "Turbidity",    # Turbidity
"NO2(-)-N [ug/L]" = "NO2(-)-N") %>% # Nitrite concentration
slice(-1) # Remove the row containing units
# Read in RainMeanCharacteristics2.csv
rain_chara_2.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics2.csv",
col_types = cols(.default = col_character()))
View(rain_chara_1.df)
View(rain_chara_2.df)
View(rain_chara_1.df)
View(rain_chara_2.df)
rain_chara_full.df <- full_join(rain_chara_1.df, rain_chara_2.df, by = "Rainfall/Runoff Event")
# Read in RainMeanCharacteristics2.csv
rain_chara_2.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics2.csv",
col_types = cols(.default = col_character())) %>%  # Units were already included in top row, so full renaming is not necessary
rename("Rainfall/Runoff event" = "Date")
# Read in RainMeanCharacteristics2.csv
rain_chara_2.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics2.csv",
col_types = cols(.default = col_character())) %>%  # Units were already included in top row, so full renaming is not necessary
rename("Date" = "Rainfall/Runoff Event")
# Read in RainMeanCharacteristics2.csv
rain_chara_2.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics2.csv",
col_types = cols(.default = col_character())) %>%  # Units were already included in top row, so full renaming is not necessary
rename("Date" = `Rainfall/Runoff Event`)
# Read in RainMeanCharacteristics2.csv
rain_chara_2.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics2.csv",
col_types = cols(.default = col_character())) %>%  # Units were already included in top row, so full renaming is not necessary
rename("Date" = `Rainfall/Runoff Event`)
names(rain_chara_2.df)
# Read in RainMeanCharacteristics2.csv
rain_chara_2.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics2.csv",
col_types = cols(.default = col_character())) %>%  # Units were already included in top row, so full renaming is not necessary
rename("Date" = `Rainfall/Runoff event`)
"Cl(-) [ug/L]" = "Cl(-)",           # Chloride concentration
# Read in RainMeanCharacteristics1.csv
rain_chara_1.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics1.csv",
col_types = cols(.default = col_character())) %>% # Read in the file
# Rename columns to include units
rename("Date" = "Rainfall/Runoff event",   # Date for ease of joining later
"Cl(-) [ug/L]" = "Cl(-)",           # Chloride concentration
"SO4(2-) [ug/L]" = "SO4 (2-)",      # Sulfate concentration
"PO4(3-) [ug/L]" = "PO4 (3-)",      # Phosphate concentration
"NH3-N [ug/L]" = "NH3-N",           # Ammonia concentration
"NO3(-)-N [ug/L]" = "NO3(-)-N",     # Nitrate concentration
"TDN [ug/L]" = "TDN",               # Total dissolved nitrogen
"COD [mg/L]" = "COD",               # Chemical oxygen demand
"Turbidity [NTU]" = "Turbidity",    # Turbidity
"NO2(-)-N [ug/L]" = "NO2(-)-N") %>% # Nitrite concentration
slice(-1) # Remove the row containing units
# Read in RainMeanCharacteristics2.csv
rain_chara_2.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics2.csv",
col_types = cols(.default = col_character())) %>%  # Units were already included in top row, so full renaming is not necessary
rename("Date" = `Rainfall/Runoff event`)
rain_chara_full.df <- full_join(rain_chara_1.df, rain_chara_2.df, by = "Date")
View(rain_chara_full.df)
inf_phys_chem.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) #%>% # Reads the data set
View(inf_phys_chem.df)
?select
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) %>% # Reads the data set
select("^Avg")
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) %>% # Reads the data set
select("^Avg .+")
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) %>% # Reads the data set
select("^Avg .*")
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) %>% # Reads the data set
select(regex("^Avg .*"))
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) %>% # Reads the data set
select(str_extract("^Avg .*"))
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) %>% # Reads the data set
select(str_extract("^Avg "))
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) %>% # Reads the data set
select(matches("^Avg"))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
# Rainfall/Runoff Characteristics
RF_RO_chara.df <- read_csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character())) %>%
# Rename columns to include units
rename("PHD [hr]" = "PHD",                  # Previous dry hours
"d_rain [min]" = "d_rain",           # Duration of the rain event
"h_rain [in]" = "h_rain",            # Depth of the rain event
"i_rain-max [mm/hr]" = "i_rain-max", # Rainfall maximum intensity
"IPRT [min]" = "IPRT",               # Initial pavement residence time
"V_runoff [L]" = "V_runoff",         # Volume of runoff
"C [-]" = "C",                       # Runoff coefficient
"Q_inf-max [L/s]" = "Qinf-max",      # Maximum influent flow rate
"Q_inf-avg [L/s]" = "Qinf-avg",      # Average influent flow rate
"Q_eff-max [L/s]" = "Qeff-max",      # Maximum effluent flow rate
"Q_eff-avg [L/s]" = "Qeff-avg",      # Average effluent flow rate
"n_inf [-]" = "n_inf",               # Number of influent samples
"n_eff [-]" = "n_eff") %>%            # Number of effluent samples
slice(-1) %>%  # Remove the row containing units
select(-Event) # Remove the event count column
# Read in RainMeanCharacteristics1.csv
rain_chara_1.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics1.csv",
col_types = cols(.default = col_character())) %>% # Read in the file
# Rename columns to include units
rename("Date" = "Rainfall/Runoff event",   # Date for ease of joining later
"Cl(-) [ug/L]" = "Cl(-)",           # Chloride concentration
"SO4(2-) [ug/L]" = "SO4 (2-)",      # Sulfate concentration
"PO4(3-) [ug/L]" = "PO4 (3-)",      # Phosphate concentration
"NH3-N [ug/L]" = "NH3-N",           # Ammonia concentration
"NO3(-)-N [ug/L]" = "NO3(-)-N",     # Nitrate concentration
"TDN [ug/L]" = "TDN",               # Total dissolved nitrogen
"COD [mg/L]" = "COD",               # Chemical oxygen demand
"Turbidity [NTU]" = "Turbidity",    # Turbidity
"NO2(-)-N [ug/L]" = "NO2(-)-N") %>% # Nitrite concentration
slice(-1) # Remove the row containing units
# Read in RainMeanCharacteristics2.csv
rain_chara_2.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics2.csv",
col_types = cols(.default = col_character())) %>%  # Units were already included in top row, so full renaming is not necessary
rename("Date" = `Rainfall/Runoff event`)
rain_chara_full.df <- full_join(rain_chara_1.df, rain_chara_2.df, by = "Date")
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) %>% # Reads the data set
select(matches("^Avg"))
View(inf_phys_chem_avg.df)
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) #%>% # Reads the data set
names(inf_phys_chem_avg.df)
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) #%>% # Reads the data set
names(inf_phys_chem_avg.df)
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) %>% # Reads the data set
select(matches("^Avg"))
inf_phys_chem_avg.df <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) %>% # Reads the data set
select(`Rainfall/Runoff event`, matches("^Avg"))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
# Rainfall/Runoff Characteristics
RF_RO_chara.df <- read_csv('Data/commaSeparatedValues/RF_RO_Event_Characteristics.csv',
col_types = cols(.default = col_character())) %>%
# Rename columns to include units
rename("PHD [hr]" = "PHD",                  # Previous dry hours
"d_rain [min]" = "d_rain",           # Duration of the rain event
"h_rain [in]" = "h_rain",            # Depth of the rain event
"i_rain-max [mm/hr]" = "i_rain-max", # Rainfall maximum intensity
"IPRT [min]" = "IPRT",               # Initial pavement residence time
"V_runoff [L]" = "V_runoff",         # Volume of runoff
"C [-]" = "C",                       # Runoff coefficient
"Q_inf-max [L/s]" = "Qinf-max",      # Maximum influent flow rate
"Q_inf-avg [L/s]" = "Qinf-avg",      # Average influent flow rate
"Q_eff-max [L/s]" = "Qeff-max",      # Maximum effluent flow rate
"Q_eff-avg [L/s]" = "Qeff-avg",      # Average effluent flow rate
"n_inf [-]" = "n_inf",               # Number of influent samples
"n_eff [-]" = "n_eff") %>%            # Number of effluent samples
slice(-1) %>%  # Remove the row containing units
select(-Event) # Remove the event count column
# Read in RainMeanCharacteristics1.csv
rain_chara_1.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics1.csv",
col_types = cols(.default = col_character())) %>% # Read in the file
# Rename columns to include units
rename("Date" = "Rainfall/Runoff event",   # Date for ease of joining later
"Cl(-) [ug/L]" = "Cl(-)",           # Chloride concentration
"SO4(2-) [ug/L]" = "SO4 (2-)",      # Sulfate concentration
"PO4(3-) [ug/L]" = "PO4 (3-)",      # Phosphate concentration
"NH3-N [ug/L]" = "NH3-N",           # Ammonia concentration
"NO3(-)-N [ug/L]" = "NO3(-)-N",     # Nitrate concentration
"TDN [ug/L]" = "TDN",               # Total dissolved nitrogen
"COD [mg/L]" = "COD",               # Chemical oxygen demand
"Turbidity [NTU]" = "Turbidity",    # Turbidity
"NO2(-)-N [ug/L]" = "NO2(-)-N") %>% # Nitrite concentration
slice(-1) # Remove the row containing units
# Read in RainMeanCharacteristics2.csv
rain_chara_2.df <- read_csv("Data/commaSeparatedValues/RainMeanCharacteristics2.csv",
col_types = cols(.default = col_character())) %>%  # Units were already included in top row, so full renaming is not necessary
rename("Date" = `Rainfall/Runoff event`)
rain_chara_full.df <- full_join(rain_chara_1.df, rain_chara_2.df, by = "Date")
# Import the individual influent data sheets, then combine them into one single data frame
inf_phys_chem <- read_csv("Data/commaSeparatedValues/InfluentCharacteristicsPhysChem.csv",
col_types = cols(.default = col_character())) %>%
rename("Date" = `Rainfall/Runoff event`)
View(inf_phys_chem)
names(inf_phys_chem)
